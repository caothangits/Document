機能一覧
 
ユースケース図
フォルダ構造
- SmartRooms-V-EX4.0.x  cドライブ直下に設置することを想定(環境変数 $SR_VIEW_HOME)
 - SmartRooms-V-EX4.0.x.war
 - config
  - setting.properties : 設定情報を保存したファイル
  - customize.css : カスタマイズしたcssを保存したファイル
 - bin
  - launch.bat : スタートアップスクリプトに設定するbatファイル
  - jetty-runner.jar : SmartRooms-V-EX4.0.x.warを動作させるサーブレットコンテナ
入退室時の挙動について
これまで入室時にはガルーンの繰り返し予定を除き、 予定の変更は行っていなかったが、表示用端末とのステータス共有を するため、入室時にグループウェアの予定に変更を行う。
また、これまで起動時に自動キャンセル時間を過ぎた予定が 表示された場合には画面では使用中状態となっていたが、 ログが記録されていなかった。
自動入室ログを作成し、上記状況の場合には自動入室を行うものとする。
ガルーン、Office 10
入室時/自動入室時に予定タイプを「使用中」に変更する。 退室時/自動終了時に予定タイプを「なし」に変更する。
これに伴い、これまで予定タイプを件名の表示/非表示に使用していた仕様を変更し、 件名の表示/非表示は件名に特定の文字列が含まれるか、含まれないかに変更する。
予定タイプに使用中を設定いただくようにする。 仕様変更となるが、これにより、ガルーンでは施設一覧の画面で会議室の 使用中、空室がわかるようになるため、メリットが大きいと感じる。
Exchange
入室時/自動入室/退室時/自動終了にExchangeの拡張領域に書き込むことによって 利用中/空室を判別できるようにする。
入室時/自動入室時にt:ExtendedFieldURIにsmartrooms-status-usingを設定する。 退室時/自動終了時にsmartrooms-status-usedを設定する。
キーの値はGUIDにて生成することとなるので、実装中に決定することとする。
Google Apps
入室時/自動入室/退室時/自動終了にGoogle Appsの拡張領域に書き込むことによって 利用中/空室を判別できるようにする
入室時/自動入室時にsmartrooms-status : smartrooms-status-usingを設定する。 退室時/自動終了時にsmartrooms-status : smartrooms-status-usedを設定する。
CSVログの変更点
入退室時の挙動の変更点を受け、CSVログのデータ項目を変更し、 下記2項目を追加する。
•	自動入室フラグ
•	入室フラグ
PC起動時に自動ログインする
https://technet.microsoft.com/ja-jp/sysinternals/bb963905
上記URLよりダウンロードしたツールにて自動ログインを実現する。
自動ログイン後、ブラウザとウェブアプリを起動する
http://windows.microsoft.com/ja-jp/windows/run-program-automatically-windows-starts#1TC=windows-7
上記URLの内容に従って成果物であるlaunch.batファイルの自動起動を設定する。
launch.batで行う処理について、以下の内容とする。
•	最新版のwarファイルを検索する。
•	最新版のwarファイルをjetty-runnerで起動する。
•	起動後、ブラウザをキオスクモードで起動する(起動するのに十分な時間を待機し、立ち上げるのでも可)
接続情報を設定する
この機能は/setupにてアクセスすることで提供される。
•	/setupにアクセスすると設定画面が表示され、現在の設定内容が表示されている。
•	この中で表示する画面が選択できる
•	ID,secretを入力し、読込ボタンを押すことで、グループウェアへの接続情報が取得できる。
•	会議室一覧を取得ボタンにて会議室一覧を取得し、表示する会議室および並び順を設定する。
•	保存ボタンを押す
•	config/setting.propertiesに保存される
–	この時GWのパスワード情報は暗号化されていること
•	SmartRooms用のAPIを通じ、管理サイト内に登録される。
•	表示用端末の端末個別設定は会議室一覧と設置位置のみとなる。
Google Appsの場合の認証について
Google Appsの場合はOAuth2による認証となるため、詳細設計時にフローを確認する。
会議室の状況を提供する
会議室の状況は/indexにアクセスすることで提供される。 /indexにアクセスすると、設定内容の表示画面の選択に
表示される会議室は設定にて選択された会議室がすべて表示されている。 既定のUIでは5室までが表示可能。(ただし、UIのカスタマイズ状況による。) 会議室状況表示画面ででている情報は以下
•	現在時刻
•	会議室名
•	現在、もしくは次の予定
•	会議タイトル
•	開始時刻、終了時刻
•	予約者、参加者数
•	会議室の状況(空室、使用中、入室待ち)
会議室の入室状況はGW側にそれぞれ下記のフィールドに保存されている。 下記の内容はバージョン4.0.0以降の変更となるため、3系、2系では使用できない。
またこれまでガルーン/Officeの予定タイプは会議タイトルの表示非表示に使用していたため、 4.0以降は仕様変更となる。表示/非表示の切り替えに関しては、他のグループウェアとあわせ、 タイトル内に特定の文字が含まれるかどうかで判定する。
•	ガルーン : 予定タイプ
•	Office : 予定タイプ
•	Exchange : t:ExtendedFieldURI 参照
•	Google Apps : extendedProperties 参照
会議室状況の表示について
空室: 現在時刻から今すぐ利用の最小値の期間に予定がない場合。 それ以降に予定がある場合はその内容を表示する。
入室待ち: 現在時刻から今すぐ利用の最小値の期間に予定があり、使用中ではない場合
使用中: 現在時刻から今すぐ利用の最小値の期間に予定があり、使用中となっている場合 - 例外: ガルーン/OFFICEの場合に非公開予定の場合は、使用中として表示する
会議室状況の更新について
詳細設計時に、下記の方法から選択する。
•	AJAXを用いて、画面を更新する
•	meta要素にてexpires : 1000を設定し、自動リロードする
自動リロードの場合、一旦画面が消えることとなるので、できればAJAXを用いて書き換える方がよい。 実装の工数等と調整する。
会議室状況のUIについて
詳細設計時にHTML / CSS設計とともに行う。 ベースとしては集中端末(黒)を踏襲する。
•	タイムチャート
•	会議室毎に全部の予定を表示
•	カードパターン
•	最新時間
•	JS/CSSのスキルを想定して、難しい画面もつくれるようにする
画面をカスタマイズする
この機能はブラウザにて/customizeにアクセスすることで提供される。
•	ブラウザを使用して、/customizeにアクセスする
•	テキストエリアが表示され、現在のカスタマイズ内容が表示される。
•	テキストエリアで、CSSを編集する
•	保存ボタンを押し、保存される。
•	/customizeにリダイレクトされ、編集後の内容が表示される
サポート対象
•	ガイドラインの作成
•	CSSカスタマイズの結果はヘルプデスク対象外
自動キャンセルの挙動について
これまで自動キャンセルを有効にしていた場合、 終日予定が深夜に自動キャンセルされていたが、 これを変更し、終日予定の場合は自動キャンセルをしない設定を提供する。
終了アラームについて(部屋前端末のみ)
要望が多いため、会議終了アラームが有効の場合には、 終了1分前にもアラームを鳴らすオプションを加える。
終了アラームのなる時間については2回とも10秒とする。 集中端末ではこの変更は行わない。
自動キャンセルについて(集中端末、部屋前端末共)
自動キャンセル前にアラートをならしてほしい要望が多い為、 自動キャンセル1分前にはアラーム音を3秒ならす設定を提供する。 また画面にて自動キャンセルが近づいていることを知らせる効果をつける。
終了アラーム同様、自動キャンセル音は選択可能とする。
